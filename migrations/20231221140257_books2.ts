import type { Knex } from 'knex'

export async function up(knex: Knex): Promise<void> {
  await knex.schema.alterTable('books', (table) => {
    table.dropColumn('text')
    table
      .integer('fk_imprint')
      .references('id')
      .inTable('imprints')
      .onDelete('RESTRICT')
    table.text('derived_type').defaultTo('original')
    table
      .integer('fk_derived_from')
      .references('id')
      .inTable('books')
      .onDelete('RESTRICT')
    table.text('title').defaultTo('')
    table.text('subtitle').defaultTo('')
    table.text('accounting_code').defaultTo('')
    table.text('isbn_paperback').defaultTo('')
    table.text('isbn_hardcover').defaultTo('')
    table.text('isbn_epub').defaultTo('')
    table.text('isbn_ibooks').defaultTo('')
    table.text('status').defaultTo('contract negotiation')
    table.text('copyright_holder').defaultTo('')
    table.text('copyright_year').defaultTo('')
    table.text('language').defaultTo('')
    table.text('short_description').defaultTo('')
    table.text('long_description').defaultTo('')
    table.text('back_cover_text').defaultTo('')
    table.text('jacket_front_text').defaultTo('')
    table.text('jacket_back_text').defaultTo('')
    table.boolean('is_public_domain').defaultTo(false)
    table.text('keywords').defaultTo('')
    table.text('bisac_code_1').defaultTo('')
    table.text('bisac_code_2').defaultTo('')
    table.text('bisac_code_3').defaultTo('')
    table.text('bisac_name_1').defaultTo('')
    table.text('bisac_name_2').defaultTo('')
    table.text('bisac_name_3').defaultTo('')
    table.text('amazon_category_1').defaultTo('')
    table.text('amazon_category_2').defaultTo('')
    table.text('amazon_category_3').defaultTo('')
    table.text('thema').defaultTo('')
    table.text('audience').defaultTo('')
    table.text('series_name').defaultTo('')
    table.integer('series_number').defaultTo(0)
    table.text('edition_name').defaultTo('')
    table.integer('edition_number').defaultTo(0)
    table.boolean('right_to_left').defaultTo(false)
    table.text('contains_prior_work').defaultTo('')
    table.text('contains_others_work').defaultTo('')
    table.text('web_domain').defaultTo('')
    table.integer('published_word_count').defaultTo(0)
    table.integer('image_count').defaultTo(0)
    table.text('press_contact').defaultTo('')
    table.text('legal_notice').defaultTo('')
    table.text('featured_ads').defaultTo('')
    table.text('goodreads_reviews_link').defaultTo('')
    table.text('amazon_sales_page_link').defaultTo('')
    table.text('amazon_a_plus_link').defaultTo('')
    table.text('a_plus_description_1').defaultTo('')
    table.text('a_plus_text_1').defaultTo('')
    table.boolean('a_plus_is_live_1').defaultTo(false)
    table.text('a_plus_rejection_reason_1').defaultTo('')
    table.text('a_plus_image_1').defaultTo('')
    table.text('a_plus_description_2').defaultTo('')
    table.text('a_plus_text_2').defaultTo('')
    table.boolean('a_plus_is_live_2').defaultTo(false)
    table.text('a_plus_rejection_reason_2').defaultTo('')
    table.text('a_plus_image_2').defaultTo('')
    table.text('a_plus_description_3').defaultTo('')
    table.text('a_plus_text_3').defaultTo('')
    table.boolean('a_plus_is_live_3').defaultTo(false)
    table.text('a_plus_rejection_reason_3').defaultTo('')
    table.text('a_plus_image_3').defaultTo('')
    table.text('errata').defaultTo('')
    table.text('notes').defaultTo('')
    table.text('author').defaultTo('')
    table.text('published_date').defaultTo('')
    table.integer('issues_count').defaultTo(0)
    table.text('created_at')
    table
      .integer('fk_created_by')
      .references('id')
      .inTable('users')
      .onDelete('RESTRICT')
  })
}

export async function down(knex: Knex): Promise<void> {
  await knex.schema.alterTable('books', (table) => {
    table.text('text')
    table.dropColumn('fk_imprint')
    table.dropColumn('derived_type')
    table.dropColumn('fk_derived_from')
    table.dropColumn('title')
    table.dropColumn('subtitle')
    table.dropColumn('accounting_code')
    table.dropColumn('isbn_paperback')
    table.dropColumn('isbn_hardcover')
    table.dropColumn('isbn_epub')
    table.dropColumn('isbn_ibooks')
    table.dropColumn('status')
    table.dropColumn('copyright')
    table.dropColumn('language')
    table.dropColumn('short_description')
    table.dropColumn('long_description')
    table.dropColumn('back_cover_text')
    table.dropColumn('jacket_front_text')
    table.dropColumn('jacket_back_text')
    table.dropColumn('is_public_domain')
    table.dropColumn('keywords')
    table.dropColumn('bisac_code_1')
    table.dropColumn('bisac_code_2')
    table.dropColumn('bisac_code_3')
    table.dropColumn('bisac_name_1')
    table.dropColumn('bisac_name_2')
    table.dropColumn('bisac_name_3')
    table.dropColumn('amazon_category_1')
    table.dropColumn('amazon_category_2')
    table.dropColumn('amazon_category_3')
    table.dropColumn('thema')
    table.dropColumn('audience')
    table.dropColumn('series_name')
    table.dropColumn('series_number')
    table.dropColumn('edition_name')
    table.dropColumn('edition_number')
    table.dropColumn('right_to_left')
    table.dropColumn('contains_prior_work')
    table.dropColumn('contains_others_work')
    table.dropColumn('web_domain')
    table.dropColumn('published_word_count')
    table.dropColumn('image_count')
    table.dropColumn('press_contact')
    table.dropColumn('legal_notice')
    table.dropColumn('featured_ads')
    table.dropColumn('notes')
    table.dropColumn('author')
    table.dropColumn('published_date')
    table.dropColumn('created_at')
    table.dropColumn('fk_created_by')
  })
}
