import{G as S,d as V,H as _,r as j,B as E,l as U,I as x,J as K,K as R,L as w}from"./index-B8Co8WN0.js";const nn=()=>({baseEditorInit:{promotion:!1,inline:!0,plugins:"lists wordcount image preview",menubar:"edit insert format tools help",toolbar_location:"top",menu:{edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},insert:{title:"Insert",items:"image link charmap hr"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript | blocks fontfamily fontsize align lineheight | forecolor backcolor | removeformat"},tools:{title:"Tools",items:"wordcount | preview"},help:{title:"Help",items:"help"}},toolbar:"undo redo | bold italic | bullist numlist | backcolor forecolor"}});var k=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],z=function(n){return k.map(function(t){return t.toLowerCase()}).indexOf(n.toLowerCase())!==-1},F=function(n,t,e){Object.keys(t).filter(z).forEach(function(i){var r=t[i];typeof r=="function"&&(i==="onInit"?r(n,e):e.on(i.substring(2),function(a){return r(a,e)}))})},T=function(n,t,e,i){var r=n.modelEvents?n.modelEvents:null,a=Array.isArray(r)?r.join(" "):r;S(i,function(c,d){e&&typeof c=="string"&&c!==d&&c!==e.getContent({format:n.outputFormat})&&e.setContent(c)}),e.on(a||"change input undo redo",function(){t.emit("update:modelValue",e.getContent({format:n.outputFormat}))})},N=function(n,t,e,i,r,a){i.setContent(a()),e.attrs["onUpdate:modelValue"]&&T(t,e,i,r),F(n,e.attrs,i)},I=0,A=function(n){var t=Date.now(),e=Math.floor(Math.random()*1e9);return I++,n+"_"+e+I+String(t)},G=function(n){return n!==null&&n.tagName.toLowerCase()==="textarea"},D=function(n){return typeof n>"u"||n===""?[]:Array.isArray(n)?n:n.split(" ")},H=function(n,t){return D(n).concat(D(t))},q=function(n){return n==null},M=function(){return{listeners:[],scriptId:A("tiny-script"),scriptLoaded:!1}},J=function(){var n=M(),t=function(r,a,c,d){var o=a.createElement("script");o.referrerPolicy="origin",o.type="application/javascript",o.id=r,o.src=c;var m=function(){o.removeEventListener("load",m),d()};o.addEventListener("load",m),a.head&&a.head.appendChild(o)},e=function(r,a,c){n.scriptLoaded?c():(n.listeners.push(c),r.getElementById(n.scriptId)||t(n.scriptId,r,a,function(){n.listeners.forEach(function(d){return d()}),n.scriptLoaded=!0}))},i=function(){n=M()};return{load:e,reinitialize:i}},W=J(),Q=function(){return typeof window<"u"?window:global},f=function(){var n=Q();return n&&n.tinymce?n.tinymce:null},X={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(n){return n==="html"||n==="text"}}},s=function(){return s=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},s.apply(this,arguments)},Y=function(n,t,e,i){return n(i||"div",{id:t,ref:e})},Z=function(n,t,e){return n("textarea",{id:t,visibility:"hidden",ref:e})},C={selector:void 0,target:void 0},en=V({props:X,setup:function(n,t){var e=n.init?s(s({},n.init),C):s({},C),i=_(n),r=i.disabled,a=i.modelValue,c=i.tagName,d=j(null),o=null,m=n.id||A("tiny-vue"),b=n.init&&n.init.inline||n.inline,h=!!t.attrs["onUpdate:modelValue"],p=!0,O=n.initialValue?n.initialValue:"",y="",P=function(u){return h?function(){return a!=null&&a.value?a.value:""}:function(){return u?O:y}},g=function(){var u=P(p),l=s(s({},e),{readonly:n.disabled,target:d.value,plugins:H(e.plugins,n.plugins),toolbar:n.toolbar||e.toolbar,inline:b,setup:function(v){o=v,v.on("init",function(L){return N(L,n,t,v,a,u)}),typeof e.setup=="function"&&e.setup(v)}});G(d.value)&&(d.value.style.visibility=""),f().init(l),p=!1};S(r,function(u){var l;o!==null&&(typeof((l=o.mode)===null||l===void 0?void 0:l.set)=="function"?o.mode.set(u?"readonly":"design"):o.setMode(u?"readonly":"design"))}),S(c,function(u){var l;h||(y=o.getContent()),(l=f())===null||l===void 0||l.remove(o),E(function(){return g()})}),U(function(){if(f()!==null)g();else if(d.value&&d.value.ownerDocument){var u=n.cloudChannel?n.cloudChannel:"6",l=n.apiKey?n.apiKey:"no-api-key",v=q(n.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/".concat(l,"/tinymce/").concat(u,"/tinymce.min.js"):n.tinymceScriptSrc;W.load(d.value.ownerDocument,v,g)}}),x(function(){f()!==null&&f().remove(o)}),b||(K(function(){p||g()}),R(function(){var u;h||(y=o.getContent()),(u=f())===null||u===void 0||u.remove(o)}));var B=function(u){var l;y=o.getContent(),(l=f())===null||l===void 0||l.remove(o),e=s(s(s({},e),u),C),E(function(){return g()})};return t.expose({rerender:B,getEditor:function(){return o}}),function(){return b?Y(w,m,d,n.tagName):Z(w,m,d)}}});export{en as E,nn as u};
