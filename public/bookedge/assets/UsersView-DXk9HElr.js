import{d as j,r as i,k as _,l as F,m as G,c as x,w as s,O as H,a,o as b,b as e,n as J,h as p,p as S,i as K,t as Q,q as W,s as X,v as Y,e as Z}from"./index-DE6ujUE8.js";import{_ as ee}from"./ConfirmationDialog.vue_vue_type_script_setup_true_lang-BhzOfAle.js";import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ae=l=>(X("data-v-639ef508"),l=l(),Y(),l),se=ae(()=>Z("span",{class:"text-h6"},"Users",-1)),oe=j({__name:"UsersView",setup(l){const{users:f,findUsers:U,archiveUser:V}=H(),u=i(!1),r=_("usersShowArchived",!1),d=i(""),h=_("usersItemsPerPage",10),m=_("usersSort",[{key:"email",order:"asc"}]),c=i(!1),y=i({}),C=[{title:"Email",key:"email"},{title:"Name",key:"name"},{title:"Roles",key:"roles"},{title:"Status",key:"status"},{title:"Actions",key:"actions",sortable:!1}];F(async()=>{u.value=!0,await U({}),u.value=!1});const P=G(()=>r.value?f.value:f.value.filter(o=>o.status!=="archived")),I=o=>{h.value=o},A=o=>{W.push({name:"user-view",params:{userId:o.toString()}})},B=o=>{y.value=o,c.value=!0},N=async()=>{c.value=!1,await V(y.value.id)};return(o,n)=>{const $=a("v-progress-circular"),D=a("v-btn"),w=a("router-link"),R=a("v-tooltip"),v=a("v-col"),T=a("v-switch"),q=a("v-text-field"),z=a("v-row"),E=a("v-card-title"),g=a("v-card-text"),k=a("v-icon"),L=a("v-data-table"),M=a("v-card");return u.value?(b(),x($,{key:0,indeterminate:"",color:"primary"})):(b(),x(M,{key:1},{default:s(()=>[e(E,null,{default:s(()=>[e(z,{class:"mt-1"},{default:s(()=>[e(v,{cols:"4"},{default:s(()=>[se,e(R,{text:"Add a user"},{activator:s(({props:t})=>[e(w,{to:{name:"user-view",params:{userId:"new"}}},{default:s(()=>[e(D,J({class:"ml-4"},t,{color:"info",icon:"mdi-plus",size:"x-small","data-cy":"add-item"}),null,16)]),_:2},1024)]),_:1})]),_:1}),e(v,{cols:"2",align:"right"},{default:s(()=>[e(T,{modelValue:p(r),"onUpdate:modelValue":n[0]||(n[0]=t=>S(r)?r.value=t:null),label:"Show archived users",color:"primary","data-cy":"show-archived"},null,8,["modelValue"])]),_:1}),e(v,{cols:"6",align:"right"},{default:s(()=>[e(q,{modelValue:d.value,"onUpdate:modelValue":n[1]||(n[1]=t=>d.value=t),"append-inner-icon":"mdi-magnify",label:"Search",density:"compact",clearable:"","single-line":"","data-cy":"search"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(g),e(g,null,{default:s(()=>[e(L,{class:"elevation-1","sort-by":p(m),"onUpdate:sortBy":n[2]||(n[2]=t=>S(m)?m.value=t:null),headers:C,items:P.value,"items-per-page":p(h),search:d.value,density:"compact","data-cy":"users-table","onUpdate:itemsPerPage":I},{"item.email":s(({item:t})=>[e(w,{to:{name:"user-view",params:{userId:t.id}}},{default:s(()=>[K(Q(t.email),1)]),_:2},1032,["to"])]),"item.actions":s(({item:t})=>[e(k,{icon:"mdi-pencil",color:"primary",onClick:O=>A(t.id)},null,8,["onClick"]),e(k,{class:"ml-2",icon:"mdi-minus-circle",color:"grey","data-cy":"archive-user",onClick:O=>B(t)},null,8,["onClick"])]),_:1},8,["sort-by","items","items-per-page","search"])]),_:1}),e(ee,{show:c.value,text:"Are you sure you want to archive this user?",onConfirmed:N,onCancelled:n[3]||(n[3]=t=>c.value=!1)},null,8,["show"])]),_:1}))}}}),ce=te(oe,[["__scopeId","data-v-639ef508"]]);export{ce as default};
