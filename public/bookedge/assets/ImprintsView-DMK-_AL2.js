import{u as E}from"./use-imprints-DNoQyVIL.js";import{d as F,r as l,k as u,l as G,m as H,c as w,w as a,a as n,o as k,b as e,n as J,h as _,p as b,i as K,t as O,e as Q,q as W}from"./index-borGH5Cr.js";import{_ as X}from"./ConfirmationDialog.vue_vue_type_script_setup_true_lang-CzDWWvl9.js";const Y=Q("span",{class:"text-h6"},"Imprints",-1),ae=F({__name:"ImprintsView",setup(Z){const{imprints:v,findImprints:x,archiveImprint:C}=E(),c=l(!1),s=u("imprintsShowArchived",!1),m=l(""),f=u("imprintsItemsPerPage",10),p=u("imprintsSort",[{key:"imprint_name",order:"asc"}]),r=l(!1),y=l({}),I=[{title:"Name",key:"imprint_name"},{title:"Code",key:"accounting_code"},{title:"Contact",key:"contact_name"},{title:"Status",key:"status"},{title:"Actions",key:"actions",sortable:!1}];G(async()=>{c.value=!0,await x({}),c.value=!1});const P=H(()=>s.value?v.value:v.value.filter(o=>o.status!=="archived")),V=o=>{f.value=o},S=o=>{W.push({name:"imprint-view",params:{imprintId:o.toString()}})},A=o=>{y.value=o,r.value=!0},B=async()=>{r.value=!1,await C(y.value.id)};return(o,i)=>{const N=n("v-progress-circular"),U=n("v-btn"),h=n("router-link"),$=n("v-tooltip"),d=n("v-col"),D=n("v-switch"),T=n("v-text-field"),q=n("v-row"),z=n("v-card-title"),g=n("v-icon"),L=n("v-data-table"),M=n("v-card-text"),R=n("v-card");return c.value?(k(),w(N,{key:0,indeterminate:"",color:"primary"})):(k(),w(R,{key:1},{default:a(()=>[e(z,null,{default:a(()=>[e(q,{class:"mt-1"},{default:a(()=>[e(d,{cols:"4"},{default:a(()=>[Y,e($,{text:"Add an imprint"},{activator:a(({props:t})=>[e(h,{to:{name:"imprint-view",params:{imprintId:"new"}}},{default:a(()=>[e(U,J({class:"ml-4"},t,{color:"info",icon:"mdi-plus",size:"x-small","data-cy":"add-item"}),null,16)]),_:2},1024)]),_:1})]),_:1}),e(d,{cols:"2",align:"right"},{default:a(()=>[e(D,{modelValue:_(s),"onUpdate:modelValue":i[0]||(i[0]=t=>b(s)?s.value=t:null),label:"Show archived imprints",color:"primary","data-cy":"show-archived"},null,8,["modelValue"])]),_:1}),e(d,{cols:"6",align:"right"},{default:a(()=>[e(T,{modelValue:m.value,"onUpdate:modelValue":i[1]||(i[1]=t=>m.value=t),"append-inner-icon":"mdi-magnify",label:"Search",density:"compact",clearable:"","single-line":"","data-cy":"search"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(M,null,{default:a(()=>[e(L,{class:"elevation-1","sort-by":_(p),"onUpdate:sortBy":i[2]||(i[2]=t=>b(p)?p.value=t:null),headers:I,items:P.value,"items-per-page":_(f),search:m.value,density:"compact","data-cy":"imprints-table","onUpdate:itemsPerPage":V},{"item.imprint_name":a(({item:t})=>[e(h,{to:{name:"imprint-view",params:{imprintId:t.id}}},{default:a(()=>[K(O(t.imprint_name),1)]),_:2},1032,["to"])]),"item.actions":a(({item:t})=>[e(g,{icon:"mdi-pencil",color:"primary",onClick:j=>S(t.id)},null,8,["onClick"]),e(g,{class:"ml-2",icon:"mdi-minus-circle",color:"grey","data-cy":"archive-imprint",onClick:j=>A(t)},null,8,["onClick"])]),_:1},8,["sort-by","items","items-per-page","search"])]),_:1}),e(X,{show:r.value,text:"Are you sure you want to archive this imprint?",onConfirmed:B,onCancelled:i[3]||(i[3]=t=>r.value=!1)},null,8,["show"])]),_:1}))}}});export{ae as default};
