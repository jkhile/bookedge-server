import{d as Zt,r as ue,k as ye,m as Qt,c as Jt,w as p,a as O,o as je,b as u,R as en,i as Re,h as Le,p as Xe,t as tn,e as nn,D as Nt,M as Ot,F as vt,C as on}from"./index-B8Co8WN0.js";import{u as an}from"./use-books-CWF24FlN.js";/*! @license DOMPurify 3.1.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.0/LICENSE */const{entries:Ut,setPrototypeOf:Dt,isFrozen:ln,getPrototypeOf:rn,getOwnPropertyDescriptor:sn}=Object;let{freeze:y,seal:I,create:Ft}=Object,{apply:Je,construct:et}=typeof Reflect<"u"&&Reflect;y||(y=function(o){return o});I||(I=function(o){return o});Je||(Je=function(o,s,i){return o.apply(s,i)});et||(et=function(o,s){return new o(...s)});const Ne=C(Array.prototype.forEach),Ct=C(Array.prototype.pop),fe=C(Array.prototype.push),De=C(String.prototype.toLowerCase),qe=C(String.prototype.toString),Mt=C(String.prototype.match),me=C(String.prototype.replace),cn=C(String.prototype.indexOf),un=C(String.prototype.trim),w=C(Object.prototype.hasOwnProperty),v=C(RegExp.prototype.test),pe=fn(TypeError);function C(r){return function(o){for(var s=arguments.length,i=new Array(s>1?s-1:0),h=1;h<s;h++)i[h-1]=arguments[h];return Je(r,o,i)}}function fn(r){return function(){for(var o=arguments.length,s=new Array(o),i=0;i<o;i++)s[i]=arguments[i];return et(r,s)}}function l(r,o){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:De;Dt&&Dt(r,null);let i=o.length;for(;i--;){let h=o[i];if(typeof h=="string"){const D=s(h);D!==h&&(ln(o)||(o[i]=D),h=D)}r[h]=!0}return r}function mn(r){for(let o=0;o<r.length;o++)w(r,o)||(r[o]=null);return r}function V(r){const o=Ft(null);for(const[s,i]of Ut(r))w(r,s)&&(Array.isArray(i)?o[s]=mn(i):i&&typeof i=="object"&&i.constructor===Object?o[s]=V(i):o[s]=i);return o}function Oe(r,o){for(;r!==null;){const i=sn(r,o);if(i){if(i.get)return C(i.get);if(typeof i.value=="function")return C(i.value)}r=rn(r)}function s(){return null}return s}const It=y(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),$e=y(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Ke=y(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),pn=y(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Ze=y(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),dn=y(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),wt=y(["#text"]),xt=y(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Qe=y(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),kt=y(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ve=y(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),_n=I(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Tn=I(/<%[\w\W]*|[\w\W]*%>/gm),gn=I(/\${[\w\W]*}/gm),hn=I(/^data-[\-\w.\u00B7-\uFFFF]/),En=I(/^aria-[\-\w]+$/),Ht=I(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),An=I(/^(?:\w+script|data):/i),Sn=I(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),zt=I(/^html$/i),bn=I(/^[a-z][.\w]*(-[.\w]+)+$/i);var Pt=Object.freeze({__proto__:null,MUSTACHE_EXPR:_n,ERB_EXPR:Tn,TMPLIT_EXPR:gn,DATA_ATTR:hn,ARIA_ATTR:En,IS_ALLOWED_URI:Ht,IS_SCRIPT_OR_DATA:An,ATTR_WHITESPACE:Sn,DOCTYPE_NAME:zt,CUSTOM_ELEMENT:bn});const yn=function(){return typeof window>"u"?null:window},Rn=function(o,s){if(typeof o!="object"||typeof o.createPolicy!="function")return null;let i=null;const h="data-tt-policy-suffix";s&&s.hasAttribute(h)&&(i=s.getAttribute(h));const D="dompurify"+(i?"#"+i:"");try{return o.createPolicy(D,{createHTML(M){return M},createScriptURL(M){return M}})}catch{return console.warn("TrustedTypes policy "+D+" could not be created."),null}};function Bt(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:yn();const o=a=>Bt(a);if(o.version="3.1.0",o.removed=[],!r||!r.document||r.document.nodeType!==9)return o.isSupported=!1,o;let{document:s}=r;const i=s,h=i.currentScript,{DocumentFragment:D,HTMLTemplateElement:M,Node:x,Element:ee,NodeFilter:k,NamedNodeMap:te=r.NamedNodeMap||r.MozNamedAttrMap,HTMLFormElement:de,DOMParser:Ce,trustedTypes:z}=r,B=ee.prototype,Me=Oe(B,"cloneNode"),Ie=Oe(B,"nextSibling"),we=Oe(B,"childNodes"),ne=Oe(B,"parentNode");if(typeof M=="function"){const a=s.createElement("template");a.content&&a.content.ownerDocument&&(s=a.content.ownerDocument)}let A,H="";const{implementation:f,createNodeIterator:d,createDocumentFragment:xe,getElementsByTagName:Y}=s,{importNode:ke}=i;let R={};o.isSupported=typeof Ut=="function"&&typeof ne=="function"&&f&&f.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:oe,ERB_EXPR:ae,TMPLIT_EXPR:j,DATA_ATTR:X,ARIA_ATTR:_e,IS_SCRIPT_OR_DATA:Te,ATTR_WHITESPACE:ge,CUSTOM_ELEMENT:he}=Pt;let{IS_ALLOWED_URI:ie}=Pt,g=null;const m=l({},[...It,...$e,...Ke,...Ze,...wt]);let _=null;const tt=l({},[...xt,...Qe,...kt,...ve]);let T=Object.seal(Ft(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),le=null,Pe=null,nt=!0,Ue=!0,ot=!1,at=!0,q=!1,it=!0,W=!1,Fe=!1,He=!1,$=!1,Ee=!1,Ae=!1,lt=!0,rt=!1;const Wt="user-content-";let ze=!0,re=!1,K={},Z=null;const st=l({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ct=null;const ut=l({},["audio","video","img","source","image","track"]);let Be=null;const ft=l({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Se="http://www.w3.org/1998/Math/MathML",be="http://www.w3.org/2000/svg",P="http://www.w3.org/1999/xhtml";let Q=P,We=!1,Ge=null;const Gt=l({},[Se,be,P],qe);let se=null;const Vt=["application/xhtml+xml","text/html"],Yt="text/html";let E=null,J=null;const jt=s.createElement("form"),mt=function(e){return e instanceof RegExp||e instanceof Function},Ve=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(J&&J===e)){if((!e||typeof e!="object")&&(e={}),e=V(e),se=Vt.indexOf(e.PARSER_MEDIA_TYPE)===-1?Yt:e.PARSER_MEDIA_TYPE,E=se==="application/xhtml+xml"?qe:De,g=w(e,"ALLOWED_TAGS")?l({},e.ALLOWED_TAGS,E):m,_=w(e,"ALLOWED_ATTR")?l({},e.ALLOWED_ATTR,E):tt,Ge=w(e,"ALLOWED_NAMESPACES")?l({},e.ALLOWED_NAMESPACES,qe):Gt,Be=w(e,"ADD_URI_SAFE_ATTR")?l(V(ft),e.ADD_URI_SAFE_ATTR,E):ft,ct=w(e,"ADD_DATA_URI_TAGS")?l(V(ut),e.ADD_DATA_URI_TAGS,E):ut,Z=w(e,"FORBID_CONTENTS")?l({},e.FORBID_CONTENTS,E):st,le=w(e,"FORBID_TAGS")?l({},e.FORBID_TAGS,E):{},Pe=w(e,"FORBID_ATTR")?l({},e.FORBID_ATTR,E):{},K=w(e,"USE_PROFILES")?e.USE_PROFILES:!1,nt=e.ALLOW_ARIA_ATTR!==!1,Ue=e.ALLOW_DATA_ATTR!==!1,ot=e.ALLOW_UNKNOWN_PROTOCOLS||!1,at=e.ALLOW_SELF_CLOSE_IN_ATTR!==!1,q=e.SAFE_FOR_TEMPLATES||!1,it=e.SAFE_FOR_XML!==!1,W=e.WHOLE_DOCUMENT||!1,$=e.RETURN_DOM||!1,Ee=e.RETURN_DOM_FRAGMENT||!1,Ae=e.RETURN_TRUSTED_TYPE||!1,He=e.FORCE_BODY||!1,lt=e.SANITIZE_DOM!==!1,rt=e.SANITIZE_NAMED_PROPS||!1,ze=e.KEEP_CONTENT!==!1,re=e.IN_PLACE||!1,ie=e.ALLOWED_URI_REGEXP||Ht,Q=e.NAMESPACE||P,T=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&mt(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(T.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&mt(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(T.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(T.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),q&&(Ue=!1),Ee&&($=!0),K&&(g=l({},wt),_=[],K.html===!0&&(l(g,It),l(_,xt)),K.svg===!0&&(l(g,$e),l(_,Qe),l(_,ve)),K.svgFilters===!0&&(l(g,Ke),l(_,Qe),l(_,ve)),K.mathMl===!0&&(l(g,Ze),l(_,kt),l(_,ve))),e.ADD_TAGS&&(g===m&&(g=V(g)),l(g,e.ADD_TAGS,E)),e.ADD_ATTR&&(_===tt&&(_=V(_)),l(_,e.ADD_ATTR,E)),e.ADD_URI_SAFE_ATTR&&l(Be,e.ADD_URI_SAFE_ATTR,E),e.FORBID_CONTENTS&&(Z===st&&(Z=V(Z)),l(Z,e.FORBID_CONTENTS,E)),ze&&(g["#text"]=!0),W&&l(g,["html","head","body"]),g.table&&(l(g,["tbody"]),delete le.tbody),e.TRUSTED_TYPES_POLICY){if(typeof e.TRUSTED_TYPES_POLICY.createHTML!="function")throw pe('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof e.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw pe('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');A=e.TRUSTED_TYPES_POLICY,H=A.createHTML("")}else A===void 0&&(A=Rn(z,h)),A!==null&&typeof H=="string"&&(H=A.createHTML(""));y&&y(e),J=e}},pt=l({},["mi","mo","mn","ms","mtext"]),dt=l({},["foreignobject","desc","title","annotation-xml"]),Xt=l({},["title","style","font","a","script"]),_t=l({},[...$e,...Ke,...pn]),Tt=l({},[...Ze,...dn]),qt=function(e){let t=ne(e);(!t||!t.tagName)&&(t={namespaceURI:Q,tagName:"template"});const n=De(e.tagName),c=De(t.tagName);return Ge[e.namespaceURI]?e.namespaceURI===be?t.namespaceURI===P?n==="svg":t.namespaceURI===Se?n==="svg"&&(c==="annotation-xml"||pt[c]):!!_t[n]:e.namespaceURI===Se?t.namespaceURI===P?n==="math":t.namespaceURI===be?n==="math"&&dt[c]:!!Tt[n]:e.namespaceURI===P?t.namespaceURI===be&&!dt[c]||t.namespaceURI===Se&&!pt[c]?!1:!Tt[n]&&(Xt[n]||!_t[n]):!!(se==="application/xhtml+xml"&&Ge[e.namespaceURI]):!1},U=function(e){fe(o.removed,{element:e});try{e.parentNode.removeChild(e)}catch{e.remove()}},Ye=function(e,t){try{fe(o.removed,{attribute:t.getAttributeNode(e),from:t})}catch{fe(o.removed,{attribute:null,from:t})}if(t.removeAttribute(e),e==="is"&&!_[e])if($||Ee)try{U(t)}catch{}else try{t.setAttribute(e,"")}catch{}},gt=function(e){let t=null,n=null;if(He)e="<remove></remove>"+e;else{const b=Mt(e,/^[\r\n\t ]+/);n=b&&b[0]}se==="application/xhtml+xml"&&Q===P&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const c=A?A.createHTML(e):e;if(Q===P)try{t=new Ce().parseFromString(c,se)}catch{}if(!t||!t.documentElement){t=f.createDocument(Q,"template",null);try{t.documentElement.innerHTML=We?H:c}catch{}}const S=t.body||t.documentElement;return e&&n&&S.insertBefore(s.createTextNode(n),S.childNodes[0]||null),Q===P?Y.call(t,W?"html":"body")[0]:W?t.documentElement:S},ht=function(e){return d.call(e.ownerDocument||e,e,k.SHOW_ELEMENT|k.SHOW_COMMENT|k.SHOW_TEXT|k.SHOW_PROCESSING_INSTRUCTION|k.SHOW_CDATA_SECTION,null)},$t=function(e){return e instanceof de&&(typeof e.nodeName!="string"||typeof e.textContent!="string"||typeof e.removeChild!="function"||!(e.attributes instanceof te)||typeof e.removeAttribute!="function"||typeof e.setAttribute!="function"||typeof e.namespaceURI!="string"||typeof e.insertBefore!="function"||typeof e.hasChildNodes!="function")},Et=function(e){return typeof x=="function"&&e instanceof x},F=function(e,t,n){R[e]&&Ne(R[e],c=>{c.call(o,t,n,J)})},At=function(e){let t=null;if(F("beforeSanitizeElements",e,null),$t(e))return U(e),!0;const n=E(e.nodeName);if(F("uponSanitizeElement",e,{tagName:n,allowedTags:g}),e.hasChildNodes()&&!Et(e.firstElementChild)&&v(/<[/\w]/g,e.innerHTML)&&v(/<[/\w]/g,e.textContent)||e.nodeType===7||it&&e.nodeType===8&&v(/<[/\w]/g,e.data))return U(e),!0;if(!g[n]||le[n]){if(!le[n]&&bt(n)&&(T.tagNameCheck instanceof RegExp&&v(T.tagNameCheck,n)||T.tagNameCheck instanceof Function&&T.tagNameCheck(n)))return!1;if(ze&&!Z[n]){const c=ne(e)||e.parentNode,S=we(e)||e.childNodes;if(S&&c){const b=S.length;for(let L=b-1;L>=0;--L)c.insertBefore(Me(S[L],!0),Ie(e))}}return U(e),!0}return e instanceof ee&&!qt(e)||(n==="noscript"||n==="noembed"||n==="noframes")&&v(/<\/no(script|embed|frames)/i,e.innerHTML)?(U(e),!0):(q&&e.nodeType===3&&(t=e.textContent,Ne([oe,ae,j],c=>{t=me(t,c," ")}),e.textContent!==t&&(fe(o.removed,{element:e.cloneNode()}),e.textContent=t)),F("afterSanitizeElements",e,null),!1)},St=function(e,t,n){if(lt&&(t==="id"||t==="name")&&(n in s||n in jt))return!1;if(!(Ue&&!Pe[t]&&v(X,t))){if(!(nt&&v(_e,t))){if(!_[t]||Pe[t]){if(!(bt(e)&&(T.tagNameCheck instanceof RegExp&&v(T.tagNameCheck,e)||T.tagNameCheck instanceof Function&&T.tagNameCheck(e))&&(T.attributeNameCheck instanceof RegExp&&v(T.attributeNameCheck,t)||T.attributeNameCheck instanceof Function&&T.attributeNameCheck(t))||t==="is"&&T.allowCustomizedBuiltInElements&&(T.tagNameCheck instanceof RegExp&&v(T.tagNameCheck,n)||T.tagNameCheck instanceof Function&&T.tagNameCheck(n))))return!1}else if(!Be[t]){if(!v(ie,me(n,ge,""))){if(!((t==="src"||t==="xlink:href"||t==="href")&&e!=="script"&&cn(n,"data:")===0&&ct[e])){if(!(ot&&!v(Te,me(n,ge,"")))){if(n)return!1}}}}}}return!0},bt=function(e){return e!=="annotation-xml"&&Mt(e,he)},yt=function(e){F("beforeSanitizeAttributes",e,null);const{attributes:t}=e;if(!t)return;const n={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:_};let c=t.length;for(;c--;){const S=t[c],{name:b,namespaceURI:L,value:G}=S,ce=E(b);let N=b==="value"?G:un(G);if(n.attrName=ce,n.attrValue=N,n.keepAttr=!0,n.forceKeepAttr=void 0,F("uponSanitizeAttribute",e,n),N=n.attrValue,n.forceKeepAttr||(Ye(b,e),!n.keepAttr))continue;if(!at&&v(/\/>/i,N)){Ye(b,e);continue}q&&Ne([oe,ae,j],Lt=>{N=me(N,Lt," ")});const Rt=E(e.nodeName);if(St(Rt,ce,N)){if(rt&&(ce==="id"||ce==="name")&&(Ye(b,e),N=Wt+N),A&&typeof z=="object"&&typeof z.getAttributeType=="function"&&!L)switch(z.getAttributeType(Rt,ce)){case"TrustedHTML":{N=A.createHTML(N);break}case"TrustedScriptURL":{N=A.createScriptURL(N);break}}try{L?e.setAttributeNS(L,b,N):e.setAttribute(b,N),Ct(o.removed)}catch{}}}F("afterSanitizeAttributes",e,null)},Kt=function a(e){let t=null;const n=ht(e);for(F("beforeSanitizeShadowDOM",e,null);t=n.nextNode();)F("uponSanitizeShadowNode",t,null),!At(t)&&(t.content instanceof D&&a(t.content),yt(t));F("afterSanitizeShadowDOM",e,null)};return o.sanitize=function(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=null,n=null,c=null,S=null;if(We=!a,We&&(a="<!-->"),typeof a!="string"&&!Et(a))if(typeof a.toString=="function"){if(a=a.toString(),typeof a!="string")throw pe("dirty is not a string, aborting")}else throw pe("toString is not a function");if(!o.isSupported)return a;if(Fe||Ve(e),o.removed=[],typeof a=="string"&&(re=!1),re){if(a.nodeName){const G=E(a.nodeName);if(!g[G]||le[G])throw pe("root node is forbidden and cannot be sanitized in-place")}}else if(a instanceof x)t=gt("<!---->"),n=t.ownerDocument.importNode(a,!0),n.nodeType===1&&n.nodeName==="BODY"||n.nodeName==="HTML"?t=n:t.appendChild(n);else{if(!$&&!q&&!W&&a.indexOf("<")===-1)return A&&Ae?A.createHTML(a):a;if(t=gt(a),!t)return $?null:Ae?H:""}t&&He&&U(t.firstChild);const b=ht(re?a:t);for(;c=b.nextNode();)At(c)||(c.content instanceof D&&Kt(c.content),yt(c));if(re)return a;if($){if(Ee)for(S=xe.call(t.ownerDocument);t.firstChild;)S.appendChild(t.firstChild);else S=t;return(_.shadowroot||_.shadowrootmode)&&(S=ke.call(i,S,!0)),S}let L=W?t.outerHTML:t.innerHTML;return W&&g["!doctype"]&&t.ownerDocument&&t.ownerDocument.doctype&&t.ownerDocument.doctype.name&&v(zt,t.ownerDocument.doctype.name)&&(L="<!DOCTYPE "+t.ownerDocument.doctype.name+`>
`+L),q&&Ne([oe,ae,j],G=>{L=me(L,G," ")}),A&&Ae?A.createHTML(L):L},o.setConfig=function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ve(a),Fe=!0},o.clearConfig=function(){J=null,Fe=!1},o.isValidAttribute=function(a,e,t){J||Ve({});const n=E(a),c=E(e);return St(n,c,t)},o.addHook=function(a,e){typeof e=="function"&&(R[a]=R[a]||[],fe(R[a],e))},o.removeHook=function(a){if(R[a])return Ct(R[a])},o.removeHooks=function(a){R[a]&&(R[a]=[])},o.removeAllHooks=function(){R={}},o}var Ln=Bt();const Nn=["innerHTML"],Dn=Zt({__name:"MetadataSearchView",setup(r){const{booksService:o}=an(),{notifyError:s}=on(),i=ue(""),h=ye("searchItemsPerPage",10),D=ye("searchSort",[{key:"title",order:"asc"}]),M=ye("selectedCommonFields",[]),x=ye("selectedAdditionalFields",[]),ee=ue(["common"]),k=ue(!1),te=ue(!1),de=ue([]),Ce=[{title:"title",key:"title"},{title:"Sample(s)",key:"headline"}],z=["title","subtitle","author","short_description","long_description","back_cover_text","jacket_front_text","jacket_back_text","keywords","notes"],B=["accounting_code","isbn_paperback","isbn_hardcover","isbn_epub","isbn_ibooks","copyright_holder","language","bisac_codes","bisac_names","amazon_categories","thema","audience","series_name","series_number","edition_name","edition_number","contains_prior_work","contains_others_work","web_domain","press_contact","legal_notice","featured_ads","notes"],Me=Qt(()=>{let f=[...M.value,...x.value];return f.includes("bisac_codes")&&(f=f.filter(d=>d!=="bisac_codes"),f.push("bisac_code_1","bisac_code_2","bisac_code_3")),f.includes("bisac_names")&&(f=f.filter(d=>d!=="bisac_names"),f.push("bisac_name_1","bisac_name_2","bisac_name_3")),f.includes("amazon_categories")&&(f=f.filter(d=>d!=="amazon_categories"),f.push("amazon_category_1","amazon_category_2","amazon_category_3")),f}),Ie=f=>{h.value=f};function we(){M.value=k.value?[...z]:[]}function ne(){x.value=te.value?[...B]:[]}function A(f){return Ln.sanitize(f)}async function H(){if(!i.value){s("You'll proably want to enter a search query");return}try{de.value=await o.search({query:{fields:Me.value,query:i.value}})}catch(f){console.error(f),s(`Error searching metadata: ${f.message}`)}}return(f,d)=>{const xe=O("v-text-field"),Y=O("v-col"),ke=O("v-btn"),R=O("v-row"),oe=O("router-link"),ae=O("v-data-table"),j=O("v-expansion-panel-title"),X=O("v-checkbox"),_e=O("v-expansion-panel-text"),Te=O("v-expansion-panel"),ge=O("v-expansion-panels"),he=O("v-card-text"),ie=O("v-card"),g=O("v-container");return je(),Jt(ie,{class:"mb-6",title:"Metadata Search"},{default:p(()=>[u(he,null,{default:p(()=>[u(g,{fluid:""},{default:p(()=>[u(R,null,{default:p(()=>[u(Y,{cols:"8"},{default:p(()=>[u(R,null,{default:p(()=>[u(Y,{cols:"10"},{default:p(()=>[u(xe,{class:"mb-4",modelValue:i.value,"onUpdate:modelValue":d[0]||(d[0]=m=>i.value=m),label:"Query","append-inner-icon":"mdi-magnify",density:"compact",onKeyup:en(H,["enter"])},null,8,["modelValue"])]),_:1}),u(Y,{cols:"2"},{default:p(()=>[u(ke,{density:"default",color:"primary",onClick:H},{default:p(()=>[Re("Search")]),_:1})]),_:1})]),_:1}),u(R,null,{default:p(()=>[u(ae,{"sort-by":Le(D),"onUpdate:sortBy":d[1]||(d[1]=m=>Xe(D)?D.value=m:null),headers:Ce,items:de.value,"items-per-page":Le(h),"item-key":"id",density:"compact","onUpdate:itemsPerPage":Ie},{"item.title":p(({item:m})=>[u(oe,{to:{name:"metadata-view",params:{bookId:m.id}}},{default:p(()=>[Re(tn(m.title),1)]),_:2},1032,["to"])]),"item.headline":p(({item:m})=>[nn("span",{innerHTML:A(m.headline)},null,8,Nn)]),_:1},8,["sort-by","items","items-per-page"])]),_:1})]),_:1}),u(Y,{cols:"4"},{default:p(()=>[u(ie,{title:"Fields to search"},{default:p(()=>[u(he,null,{default:p(()=>[u(ge,{modelValue:ee.value,"onUpdate:modelValue":d[6]||(d[6]=m=>ee.value=m),multiple:""},{default:p(()=>[u(Te,{value:"common"},{default:p(()=>[u(j,{class:"text-h6"},{default:p(()=>[Re("Common Fields")]),_:1}),u(_e,null,{default:p(()=>[u(X,{class:"my-n6",modelValue:k.value,"onUpdate:modelValue":d[2]||(d[2]=m=>k.value=m),label:"Select All / None",density:"compact",onChange:we},null,8,["modelValue"]),(je(),Nt(vt,null,Ot(z,m=>u(X,{class:"mb-n2",key:m,modelValue:Le(M),"onUpdate:modelValue":d[3]||(d[3]=_=>Xe(M)?M.value=_:null),label:m,value:m,density:"compact","hide-details":""},null,8,["modelValue","label","value"])),64))]),_:1})]),_:1}),u(Te,{value:"additional"},{default:p(()=>[u(j,{class:"text-h6"},{default:p(()=>[Re("Additional Fields")]),_:1}),u(_e,null,{default:p(()=>[u(X,{class:"my-n6",modelValue:te.value,"onUpdate:modelValue":d[4]||(d[4]=m=>te.value=m),label:"Select All / None",density:"compact",onChange:ne},null,8,["modelValue"]),(je(),Nt(vt,null,Ot(B,m=>u(X,{class:"mb-n2",key:m,modelValue:Le(x),"onUpdate:modelValue":d[5]||(d[5]=_=>Xe(x)?x.value=_:null),label:m,value:m,density:"compact","hide-details":""},null,8,["modelValue","label","value"])),64))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}});export{Dn as default};
